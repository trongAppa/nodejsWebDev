Node.js 클러스터 모듈
클러스터 모듈을 사용하여 여러 워커 프로세스를 생성하고 관리하는 예제
Node.js에서 단일 CPU 코어를 사용하여 멀티스레딩을 구현하는 방식으로 동작

const cluster = require('cluster');
const os = require('os');

if (cluster.isMaster) {
  const numWorkers = os.cpus().length;

  console.log(`Master process is running with ${numWorkers} workers`);

  // 워커 프로세스 생성
  for (let i = 0; i < numWorkers; i++) {
    cluster.fork();
  }

  // 워커가 종료되었을 때 새로운 워커 생성
  cluster.on('exit', (worker, code, signal) => {
    console.log(`Worker ${worker.process.pid} died`);
    console.log('Creating a new worker...');
    cluster.fork();
  });
} else {
  // 워커 프로세스에서 실제 작업 수행
  console.log(`Worker ${process.pid} started`);

  // TODO: 워커 프로세스에서 수행할 작업을 구현

  // 워커 프로세스 종료
  process.exit();
}

클러스터 모듈을 사용하여 워커 프로세스를 생성하고 관리하는 방법
cluster.isMaster를 사용하여 마스터 프로세스와 워커 프로세스를 구분하고, cluster.fork()를 사용하여 워커 프로세스를 생성

마스터 프로세스는 numWorkers 개수만큼 워커 프로세스를 생성하고, 워커 프로세스가 종료되었을 때 새로운 워커를 생성하는 로직을 포함

각 워커 프로세스는 cluster.on('exit') 이벤트 핸들러를 통해 종료되었을 때 새로운 워커를 생성하도록 설정
워커 프로세스에서는 실제 작업을 수행하고, 작업이 완료되면 process.exit()을 호출하여 프로세스를 종료

실제 프로젝트에서는 워커 프로세스에서 수행할 작업을 구현
TODO 주석 부분에 작업을 추가
이를 통해 클러스터 모듈을 사용하여 멀티스레딩을 구현하고, CPU 코어를 최대한 활용