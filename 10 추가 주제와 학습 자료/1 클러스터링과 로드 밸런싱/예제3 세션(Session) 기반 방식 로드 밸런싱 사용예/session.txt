세션(Session) 기반 방식 로드 밸런싱
Node.js에서 세션(Session) 기반 방식의 로드 밸런싱을 구현하는 예제는 다소 복잡
세션을 유지하고 분산된 서버 간에 세션 정보를 공유해야하기 때문
일반적으로 외부 데이터베이스나 공유된 캐시 서버 등을 사용

Redis를 사용하여 세션(Session) 기반 방식의 로드 밸런싱을 구현하는 예제

const express = require('express');
const session = require('express-session');
const RedisStore = require('connect-redis')(session);

const app = express();

// Redis 세션 스토어 설정
const sessionStore = new RedisStore({
  host: 'localhost',
  port: 6379,
  // Redis 연결 설정
});

// 세션 설정
app.use(session({
  store: sessionStore,
  secret: 'my-secret',
  resave: false,
  saveUninitialized: false
}));

// 라우트 핸들러
app.get('/', (req, res) => {
  if (req.session.views) {
    req.session.views++;
  } else {
    req.session.views = 1;
  }
  res.send(`Hello! You have visited this page ${req.session.views} times.`);
});

// 서버 시작
const port = 8000;
app.listen(port, () => {
  console.log(`Load balancer is running on port ${port}`);
});

Express.js와 Redis를 사용하여 세션(Session) 기반 방식의 로드 밸런싱을 구현
RedisStore를 사용하여 세션 정보를 Redis에 저장하고, connect-redis 모듈을 통해 Redis와 연결

세션 설정은 express-session 미들웨어를 사용하여 구성
store 옵션에 RedisStore 인스턴스를 전달하여 Redis를 세션 스토어로 설정
secret은 세션 식별을 위한 비밀키로, 애플리케이션에서 사용자 세션을 식별하는 데 사용

라우트 핸들러에서는 클라이언트의 세션 정보를 확인하고, 방문 횟수를 증가
클라이언트에게 방문 횟수를 응답

실제 프로젝트에서는 Redis 호스트 및 포트 정보를 실제 Redis 서버에 맞게 수정
로드 밸런서를 통해 여러 서버에서 실행되는 경우 Redis를 통해 세션 정보가 공유되도록 설정

세션(Session) 기반 방식의 로드 밸런싱은 세션 정보를 중앙 집중식 스토어에 저장하고, 서버 간에 세션 정보를 공유함으로써 사용자의 일관된 세션 상태를 유지
